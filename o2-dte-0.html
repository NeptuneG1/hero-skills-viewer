<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HOK Match Viewer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #121212;
      color: #f0f0f0;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #ff7733;
    }
    .match {
      background: #1e1e1e;
      margin-bottom: 20px;
      padding: 20px;
      border-radius: 10px;
      border-left: 5px solid #ff7733;
    }
    .teams {
      display: flex;
      justify-content: space-between;
    }
    .team {
      width: 48%;
    }
    .team h2 {
      color: #ffd700;
    }
    .bans, .heroes {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .ban, .hero {
      background: #2a2a2a;
      padding: 10px;
      border-radius: 5px;
      text-align: center;
    }
    .ban img, .hero img {
      width: 60px;
      height: auto;
      border-radius: 5px;
    }
    .hero span {
      display: block;
      font-size: 0.8rem;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <h1>Honor of Kings Match Viewer</h1>
  <div id="matchContainer"></div>

  <script>
    const matchDataUrl = 'https://neptuneg1.github.io/hero-skills-viewer/matchdata.json';

    async function fetchMatchData() {
      const res = await fetch(matchDataUrl);
      const matches = await res.json();
      renderMatches(matches);
    }

    function createHeroCard(hero, player, kda, isMVP) {
      return `
        <div class="hero">
          <img src="${hero.ImageURL || 'https://i.imgur.com/kkUX3a3.jpeg'}" alt="${hero.Hero}">
          <span><strong>${hero.Hero}</strong><br>${player}<br>${kda}${isMVP ? ' ðŸŒŸ' : ''}</span>
        </div>
      `;
    }

    function createBanCard(heroName, heroData) {
      const hero = heroData.find(h => h.Hero === heroName);
      return `
        <div class="ban">
          <img src="${hero?.ImageURL || 'https://i.imgur.com/kkUX3a3.jpeg'}" alt="${heroName}">
          <div>${heroName}</div>
        </div>
      `;
    }

    async function renderMatches(matches) {
      const res = await fetch('https://raw.githubusercontent.com/NeptuneG1/hero-skills-viewer/main/data.json');
      const heroData = await res.json();
      const container = document.getElementById('matchContainer');
      container.innerHTML = '';

      matches.forEach(match => {
        const matchDiv = document.createElement('div');
        matchDiv.className = 'match';

        matchDiv.innerHTML = `
          <h2>${match.Team1Name} (${match.Team1Score}) vs ${match.Team2Name} (${match.Team2Score})</h2>
          <div class="teams">
            <div class="team">
              <h2>${match.Team1Name}</h2>
              <div class="bans">${match.Team1Bans.map(ban => createBanCard(ban, heroData)).join('')}</div>
              <div class="heroes">
                ${match.Team1Heroes.map((hero, i) => createHeroCard(
                  heroData.find(h => h.Hero === hero),
                  match.Team1Players[i],
                  match.Team1KDA[i],
                  i === match.Team1MVP
                )).join('')}
              </div>
            </div>
            <div class="team">
              <h2>${match.Team2Name}</h2>
              <div class="bans">${match.Team2Bans.map(ban => createBanCard(ban, heroData)).join('')}</div>
              <div class="heroes">
                ${match.Team2Heroes.map((hero, i) => createHeroCard(
                  heroData.find(h => h.Hero === hero),
                  match.Team2Players[i],
                  match.Team2KDA[i],
                  i === match.Team2MVP
                )).join('')}
              </div>
            </div>
          </div>
        `;

        container.appendChild(matchDiv);
      });
    }

    fetchMatchData();
  </script>
</body>
</html>
