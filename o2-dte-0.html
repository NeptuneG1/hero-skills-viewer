<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>All Matches Viewer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #1c1f26;
      color: #f0f0f0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
    }
    .match {
      border: 1px solid #333;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 40px;
      background: #252933;
    }
    .match-header {
      text-align: center;
      margin-bottom: 20px;
    }
    .team-section {
      display: flex;
      justify-content: space-between;
      gap: 20px;
    }
    .team {
      width: 48%;
    }
    .team h2 {
      text-align: center;
      margin-bottom: 10px;
    }
    .hero {
      background: #2a2d38;
      padding: 6px 8px;
      margin-bottom: 6px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.85rem;
      line-height: 1.2;
    }
    .hero img {
      width: 48px;
      height: 48px;
      border-radius: 6px;
      object-fit: cover;
    }
    .hero span {
      display: inline-block;
    }
    .ban-list {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 15px;
    }
    .ban {
      background: #912323;
      padding: 5px 10px;
      border-radius: 8px;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <h1>Honor of Kings Match Viewer</h1>
  <div id="matchesContainer"></div>

  <script>
    const matchURL = "https://neptuneg1.github.io/hero-skills-viewer/matchdata.json";
    const heroURL = "https://raw.githubusercontent.com/NeptuneG1/hero-skills-viewer/main/data.json";

    async function loadData() {
      const [matchRes, heroRes] = await Promise.all([
        fetch(matchURL),
        fetch(heroURL)
      ]);
      const matchData = await matchRes.json();
      const heroData = await heroRes.json();
      renderAllMatches(matchData, heroData);
    }

    function createHeroCard(hero, player, kda, isMVP) {
      return `
        <div class="hero">
          <img src="${hero?.ImageURL || 'https://i.imgur.com/kkUX3a3.jpeg'}" alt="${hero?.Hero || 'Unknown'}">
          <span><strong>${hero?.Hero || 'Unknown'}</strong><br>${player}<br>KDA: ${kda}${isMVP ? ' ðŸŒŸ MVP' : ''}</span>
        </div>
      `;
    }

    function renderAllMatches(matches, heroData) {
      const container = document.getElementById("matchesContainer");
      matches.forEach((match, idx) => {
        const matchDiv = document.createElement("div");
        matchDiv.className = "match";
        matchDiv.innerHTML = `
          <div class="match-header">
            <h2>Game ${match.game}: ${match.matchup}</h2>
            <p>${match.tournament} | ${match.stage} | ${match.date}</p>
            <p><strong>${match.team1_name} ${match.team1_score} - ${match.team2_score} ${match.team2_name}</strong> | Winner: ${match.winner}</p>
          </div>
          <div class="team-section">
            <div class="team">
              <h2>${match.team1_name}</h2>
              <div class="ban-list">${renderBans(match, 'team1')}</div>
              <div>${renderHeroes(match, heroData, 'team1')}</div>
            </div>
            <div class="team">
              <h2>${match.team2_name}</h2>
              <div class="ban-list">${renderBans(match, 'team2')}</div>
              <div>${renderHeroes(match, heroData, 'team2')}</div>
            </div>
          </div>
        `;
        container.appendChild(matchDiv);
      });
    }

    function renderBans(match, team) {
      return [1, 2, 3, 4].map(i => `<div class="ban">${match[`${team}_ban${i}`]}</div>`).join('');
    }

    function renderHeroes(match, heroData, team) {
      let output = "";
      for (let i = 1; i <= 5; i++) {
        const heroName = match[`${team}_hero${i}`];
        const hero = heroData.find(h => h.Hero === heroName);
        const player = match[`${team}_player${i}`];
        const kda = match[`${team}_kda${i}`];
        const isMVP = match[`${team}_MVP`] === i;
        output += createHeroCard(hero, player, kda, isMVP);
      }
      return output;
    }

    loadData();
  </script>
</body>
</html>
