<!DOCTYPE html>
<html>
<head>
  <title>Honor of Kings Draft</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #121212;
      color: #f0f0f0;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1rem;
    }

    h1 {
      color: #fff;
      margin-bottom: 1rem;
    }

    .draft-container {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-bottom: 2rem;
    }

    .team {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
    }

    .ban-section {
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
      gap: 1rem;
    }

    .ban-slot {
      width: 80px;
      height: 80px;
      background-color: #1e1e1e;
      border-radius: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      border: 1px solid #333;
    }

    .hero-slot {
      width: 120px;
      height: 140px;
      background-color: #1e1e1e;
      border-radius: 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border: 1px solid #333;
      position: relative;
    }

    .hero-slot select {
      margin-top: 0.5rem;
      background-color: #333;
      color: white;
      border: none;
      padding: 0.3rem;
      width: 100px;
      font-size: 0.8rem;
      border-radius: 0.3rem;
    }

    .tooltip {
      position: relative;
      cursor: help;
      text-align: center;
      margin-top: 0.3rem;
    }

    .tooltip .tooltiptext {
      visibility: hidden;
      background-color: #333;
      color: #fff;
      text-align: left;
      padding: 0.5rem;
      border-radius: 0.5rem;
      position: absolute;
      z-index: 1;
      top: -10px;
      left: 130%;
      opacity: 0;
      transition: opacity 0.3s;
      width: 250px;
      font-size: 0.8rem;
    }

    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }

    .counter-info {
      margin-top: 2rem;
      background-color: #1e1e1e;
      padding: 1rem;
      border-radius: 1rem;
      width: 80%;
      max-width: 800px;
    }

    select {
      font-family: inherit;
    }
  </style>
</head>
<body>
  <h1>Honor of Kings Draft</h1>

  <div class="ban-section" id="team1Bans"></div>
  <div class="draft-container">
    <div class="team" id="team1"></div>
    <div class="team" id="team2"></div>
  </div>
  <div class="ban-section" id="team2Bans"></div>

  <div class="counter-info" id="counterInfo">Select a hero to view counter information.</div>

  <script>
    const API_URL = "https://raw.githubusercontent.com/NeptuneG1/hero-skills-viewer/main/data.json";
    let heroData = [];

    async function loadHeroes() {
      const res = await fetch(API_URL);
      heroData = await res.json();
      renderDraftUI();
    }

    function createHeroSlot(teamId, slotIndex) {
      const slot = document.createElement('div');
      slot.className = 'hero-slot';

      const select = document.createElement('select');
      const defaultOption = document.createElement('option');
      defaultOption.value = "";
      defaultOption.textContent = "Select Hero";
      select.appendChild(defaultOption);

      heroData.forEach(hero => {
        const option = document.createElement('option');
        option.value = hero.Hero;
        option.textContent = hero.Hero;
        select.appendChild(option);
      });

      const skillInfo = document.createElement('div');
      skillInfo.className = 'tooltip';
      skillInfo.textContent = "Hover for Skills";
      const tooltip = document.createElement('div');
      tooltip.className = 'tooltiptext';
      skillInfo.appendChild(tooltip);
      slot.appendChild(skillInfo);

      select.addEventListener('change', () => {
        const selected = heroData.find(h => h.Hero === select.value);
        tooltip.innerHTML = '';
        if (selected) {
          for (let i = 1; i <= 5; i++) {
            const name = selected[`SkillName${i}`];
            const desc = selected[`SkillDesc${i}`];
            const type = selected[`SkillType${i}`];
            if (name) {
              tooltip.innerHTML += `<strong>${type || 'Skill'} - ${name}</strong><br>${desc || 'No description'}<br><br>`;
            }
          }
          document.getElementById('counterInfo').innerHTML = `
            <strong>${selected.Hero}</strong> is countered by: ${selected["Countered by"] || 'N/A'}
          `;
        }
      });

      slot.appendChild(select);
      return slot;
    }

    function createBanSlots(containerId) {
      const container = document.getElementById(containerId);
      for (let i = 0; i < 3; i++) {
        const slot = document.createElement('div');
        slot.className = 'ban-slot';
        const select = document.createElement('select');
        select.innerHTML = `<option value="">Ban</option>` +
          heroData.map(h => `<option value="${h.Hero}">${h.Hero}</option>`).join('');
        slot.appendChild(select);
        container.appendChild(slot);
      }
    }

    function renderDraftUI() {
      for (let i = 0; i < 5; i++) {
        document.getElementById('team1').appendChild(createHeroSlot('team1', i));
        document.getElementById('team2').appendChild(createHeroSlot('team2', i));
      }

      createBanSlots('team1Bans');
      createBanSlots('team2Bans');
    }

    loadHeroes();
  </script>
</body>
</html>
